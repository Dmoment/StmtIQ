# Kamal Secrets - reads from .env.kamal
# Uses shell to extract values

# === Docker Registry ===
KAMAL_REGISTRY_PASSWORD=$(grep '^KAMAL_REGISTRY_PASSWORD=' .env.kamal | cut -d '=' -f2-)

# === Rails ===
RAILS_MASTER_KEY=$(grep '^RAILS_MASTER_KEY=' .env.kamal | cut -d '=' -f2-)

# === Database ===
POSTGRES_PASSWORD=$(grep '^POSTGRES_PASSWORD=' .env.kamal | cut -d '=' -f2-)
DATABASE_URL="postgres://postgres:$(grep '^POSTGRES_PASSWORD=' .env.kamal | cut -d '=' -f2-)@stmtiq-db:5432/stmtiq_production"

# === Redis ===
REDIS_URL="redis://stmtiq-redis:6379/0"

# === Clerk Auth ===
CLERK_PUBLISHABLE_KEY=$(grep '^CLERK_PUBLISHABLE_KEY=' .env.kamal | cut -d '=' -f2-)
CLERK_SECRET_KEY=$(grep '^CLERK_SECRET_KEY=' .env.kamal | cut -d '=' -f2-)

# === OpenAI ===
OPENAI_API_KEY=$(grep '^OPENAI_API_KEY=' .env.kamal | cut -d '=' -f2-)

# === Google OAuth ===
GOOGLE_CLIENT_ID=$(grep '^GOOGLE_CLIENT_ID=' .env.kamal | cut -d '=' -f2-)
GOOGLE_CLIENT_SECRET=$(grep '^GOOGLE_CLIENT_SECRET=' .env.kamal | cut -d '=' -f2-)

# === AWS ===
AWS_ACCESS_KEY_ID=$(grep '^AWS_ACCESS_KEY_ID=' .env.kamal | cut -d '=' -f2-)
AWS_SECRET_ACCESS_KEY=$(grep '^AWS_SECRET_ACCESS_KEY=' .env.kamal | cut -d '=' -f2-)

# === Active Record Encryption ===
ACTIVE_RECORD_ENCRYPTION_PRIMARY_KEY=$(grep '^ACTIVE_RECORD_ENCRYPTION_PRIMARY_KEY=' .env.kamal | cut -d '=' -f2-)
ACTIVE_RECORD_ENCRYPTION_DETERMINISTIC_KEY=$(grep '^ACTIVE_RECORD_ENCRYPTION_DETERMINISTIC_KEY=' .env.kamal | cut -d '=' -f2-)
ACTIVE_RECORD_ENCRYPTION_KEY_DERIVATION_SALT=$(grep '^ACTIVE_RECORD_ENCRYPTION_KEY_DERIVATION_SALT=' .env.kamal | cut -d '=' -f2-)
